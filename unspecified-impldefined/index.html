<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>What are 'Unspecified' and 'Implementation-Defined' behavior? | C++ FAQ</title><meta name=keywords content="beginner"><meta name=description content="Unlike undefined behavior, unspecified and implementation-defined behavior occur all the time in a normal C++ program. Making use of unspecified/implementation-defined behavior is unavoidable, but relying on specific behavior can be fatal.
The C++ standard does not specify what happens in every scenario, so the implementation has the freedom to implement behavior, constants, macro definitions, and more in multiple possible ways.
Unspecified Behavior unspecified by the standard is not necessary to document, but still valid."><meta name=author content><link rel=canonical href=https://64.github.io/cpp-faq/unspecified-impldefined/><link href=/cpp-faq/assets/css/stylesheet.min.746a86b58bb2b052b5e4df8216510494f04f81e62c08d626150c26c69ca929da.css integrity="sha256-dGqGtYuysFK15N+CFlEElPBPgeYsCNYmFQwmxpypKdo=" rel="preload stylesheet" as=style><link rel=icon href=https://64.github.io/cpp-faq/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://64.github.io/cpp-faq/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://64.github.io/cpp-faq/favicon-32x32.png><link rel=apple-touch-icon href=https://64.github.io/cpp-faq/apple-touch-icon.png><link rel=mask-icon href=https://64.github.io/cpp-faq/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><meta property="og:title" content="What are 'Unspecified' and 'Implementation-Defined' behavior?"><meta property="og:description" content="Unlike undefined behavior, unspecified and implementation-defined behavior occur all the time in a normal C++ program. Making use of unspecified/implementation-defined behavior is unavoidable, but relying on specific behavior can be fatal.
The C++ standard does not specify what happens in every scenario, so the implementation has the freedom to implement behavior, constants, macro definitions, and more in multiple possible ways.
Unspecified Behavior unspecified by the standard is not necessary to document, but still valid."><meta property="og:type" content="article"><meta property="og:url" content="https://64.github.io/cpp-faq/unspecified-impldefined/"><meta property="og:site_name" content="C++ FAQ"><meta name=twitter:card content="summary"><meta name=twitter:title content="What are 'Unspecified' and 'Implementation-Defined' behavior?"><meta name=twitter:description content="Unlike undefined behavior, unspecified and implementation-defined behavior occur all the time in a normal C++ program. Making use of unspecified/implementation-defined behavior is unavoidable, but relying on specific behavior can be fatal.
The C++ standard does not specify what happens in every scenario, so the implementation has the freedom to implement behavior, constants, macro definitions, and more in multiple possible ways.
Unspecified Behavior unspecified by the standard is not necessary to document, but still valid."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Faqs","item":"https://64.github.io/cpp-faq/faq/"},{"@type":"ListItem","position":3,"name":"What are 'Unspecified' and 'Implementation-Defined' behavior?","item":"https://64.github.io/cpp-faq/unspecified-impldefined/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What are 'Unspecified' and 'Implementation-Defined' behavior?","name":"What are \u0027Unspecified\u0027 and \u0027Implementation-Defined\u0027 behavior?","description":"Unlike undefined behavior, unspecified and implementation-defined behavior occur all the time in a normal C++ program. Making use of unspecified/implementation-defined behavior is …","keywords":["beginner"],"articleBody":"Unlike undefined behavior, unspecified and implementation-defined behavior occur all the time in a normal C++ program. Making use of unspecified/implementation-defined behavior is unavoidable, but relying on specific behavior can be fatal.\nThe C++ standard does not specify what happens in every scenario, so the implementation has the freedom to implement behavior, constants, macro definitions, and more in multiple possible ways.\nUnspecified Behavior unspecified by the standard is not necessary to document, but still valid. The range of possible behavior behavior can be predictable and is sometimes even specified explicitly by the C++ standard. However, in most cases, the exact behavior can not be predicted.\nCommon Examples The following things are unspecified (list not exhaustive):\n whether all string literals are distinct (they might have different addresses) the initial value of storage allocated by new (often zero when getting new memory from the OS) evaluation order of operands of some operators (for A + B, B might be evaluated before A) amount of time it takes for a thread to make progress (but eventual progress is guaranteed) whether references require any storage (they usually do, just like pointers)  Unspecified behavior can be as predictable as “we probably know what happens”, such as a reference requiring some storage when used as a class member. However, it can also be nonsensical to define, such as the initial value of storage allocated by new. The new operator usually uses std::malloc to allocate storage, but the initial value of std::malloc’s storage is indeterminate.\nFrom the C++20 standard:\n unspecified behavior behavior, for a well-formed program construct and correct data, that depends on the implementation\nNote: The implementation is not required to document which behavior occurs. […]\n See 3.31 [defns.unspecified]\nImplementation-Defined Implementation-defined is a lesser evil than unspecified, because the implementation details must be documented. Relying on implementation-defined behavior can still cause portability issues such as code working only on one operating system, but at least, these portability issues are known and predictable.\nCommon Examples The following things are implementation-defined (list not exhaustive):\n the exact size of fundamental types such as int and long definition of the NULL macro (possibly 0, ((void*)0), or nullptr) conversions between pointers and integers (reinterpret_cast(...)) nesting limit for #include directives choice of larger or smaller value for float literals (round up or down if necessary) operating systems on which implementation depends value of pow(0,0) (usually 1)  All of these details are documented somewhere, whether it is in standard library headers, manual pages of the OS, etc. Problems only arise when the developer relies on one particular implementation. A common example is assuming that long will be at least 64 bits in size, when actually, only 32 bits are guaranteed by the standard. Windows requires long to be 32 bits, while Unix-like operating systems use 64 bits.\nFrom the C++20 standard:\n implementation-defined behavior behavior, for a well-formed program construct and correct data, that depends on the implementation and that each implementation documents\n See 3.13 [defns.impl.defined]\nSee Also  https://en.cppreference.com/w/cpp/language/types#Data_models https://en.wikipedia.org/wiki/Unspecified_behavior https://timsong-cpp.github.io/cppwp/n4861/impldefindex  ","wordCount":"496","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://64.github.io/cpp-faq/unspecified-impldefined/"},"publisher":{"@type":"Organization","name":"C++ FAQ","logo":{"@type":"ImageObject","url":"https://64.github.io/cpp-faq/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://64.github.io/cpp-faq accesskey=h title="C++ FAQ (Alt + H)">C++ FAQ</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>What are &lsquo;Unspecified&rsquo; and &lsquo;Implementation-Defined&rsquo; behavior?</h1><div class=post-meta><ul class=post-tags><li><a href=https://64.github.io/cpp-faq/tags/beginner/>beginner</a></li></ul></div></header><div class=post-content><p>Unlike <a href=../undefined-behaviour><em>undefined</em> behavior</a>, <em>unspecified</em> and <em>implementation-defined</em> behavior occur all the
time in a normal C++ program.
Making use of unspecified/implementation-defined behavior is unavoidable, but relying on specific behavior can be fatal.</p><p>The C++ standard does not specify what happens in every scenario, so the implementation has the freedom to implement
behavior, constants, macro definitions, and more in multiple possible ways.</p><h2 id=unspecified>Unspecified<a hidden class=anchor aria-hidden=true href=#unspecified>#</a></h2><p>Behavior unspecified by the standard is not necessary to document, but still valid.
The <em>range</em> of possible behavior behavior can be predictable and is sometimes even specified explicitly by the
C++ standard.
However, in most cases, the exact behavior can not be predicted.</p><h3 id=common-examples>Common Examples<a hidden class=anchor aria-hidden=true href=#common-examples>#</a></h3><p>The following things are unspecified (list not exhaustive):</p><ul><li>whether all string literals are distinct (they might have different addresses)</li><li>the initial value of storage allocated by <code>new</code> (often zero when getting new memory from the OS)</li><li>evaluation order of operands of some operators (for <code>A + B</code>, <code>B</code> might be evaluated before <code>A</code>)</li><li>amount of time it takes for a thread to make progress (but eventual progress is guaranteed)</li><li>whether references require any storage (they usually do, just like pointers)</li></ul><p>Unspecified behavior can be as predictable as <em>&ldquo;we probably know what happens&rdquo;</em>, such as a reference requiring some
storage when used as a class member.
However, it can also be nonsensical to define, such as the initial value of storage allocated by <code>new</code>.
The <code>new</code> operator usually uses <code>std::malloc</code> to allocate storage, but the initial value of <code>std::malloc</code>&rsquo;s storage is
indeterminate.</p><p>From the C++20 standard:</p><blockquote><p><strong>unspecified behavior</strong>
<em>behavior, for a well-formed program construct and correct data, that depends on the implementation</em></p><p>Note: The implementation is not required to document which behavior occurs. [&mldr;]</p></blockquote><p>See <a href=https://timsong-cpp.github.io/cppwp/n4861/intro.defs#defns.unspecified><strong>3.31 [defns.unspecified]</strong></a></p><h2 id=implementation-defined>Implementation-Defined<a hidden class=anchor aria-hidden=true href=#implementation-defined>#</a></h2><p><em>Implementation-defined</em> is a lesser evil than <em>unspecified</em>, because the implementation details <strong>must</strong> be
documented.
Relying on implementation-defined behavior can still cause portability issues such as code working only on one operating
system, but at least, these portability issues are known and predictable.</p><h3 id=common-examples-1>Common Examples<a hidden class=anchor aria-hidden=true href=#common-examples-1>#</a></h3><p>The following things are implementation-defined (list not exhaustive):</p><ul><li>the exact size of fundamental types such as <code>int</code> and <code>long</code></li><li>definition of the <code>NULL</code> macro (possibly <code>0</code>, <code>((void*)0)</code>, or <code>nullptr</code>)</li><li>conversions between pointers and integers (<code>reinterpret_cast&lt;std::uintptr_t>(...)</code>)</li><li>nesting limit for <code>#include</code> directives</li><li>choice of larger or smaller value for <code>float</code> literals (round up or down if necessary)</li><li>operating systems on which implementation depends</li><li>value of <code>pow(0,0)</code> (usually <code>1</code>)</li></ul><p>All of these details are documented somewhere, whether it is in standard library headers, manual pages of the OS, etc.
Problems only arise when the developer relies on one particular implementation.
A common example is assuming that <code>long</code> will be at least 64 bits in size, when actually, only 32 bits are guaranteed by
the standard.
Windows requires <code>long</code> to be 32 bits, while Unix-like operating systems use 64 bits.</p><p>From the C++20 standard:</p><blockquote><p><strong>implementation-defined behavior</strong>
<em>behavior, for a well-formed program construct and correct data, that depends on the implementation and that each
implementation documents</em></p></blockquote><p>See <a href=https://timsong-cpp.github.io/cppwp/n4861/intro.defs#defns.impl.defined><strong>3.13 [defns.impl.defined]</strong></a></p><h2 id=see-also>See Also<a hidden class=anchor aria-hidden=true href=#see-also>#</a></h2><ul><li><a href=https://en.cppreference.com/w/cpp/language/types#Data_models>https://en.cppreference.com/w/cpp/language/types#Data_models</a></li><li><a href=https://en.wikipedia.org/wiki/Unspecified_behavior>https://en.wikipedia.org/wiki/Unspecified_behavior</a></li><li><a href=https://timsong-cpp.github.io/cppwp/n4861/impldefindex>https://timsong-cpp.github.io/cppwp/n4861/impldefindex</a></li></ul></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://64.github.io/cpp-faq>C++ FAQ</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/cpp-faq/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>